{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst initialState = {\n  loading: false,\n  error: null,\n  data: null,\n  pagination: {\n    totalCount: 16,\n    pageSize: 10,\n    currentPage: 1,\n    totalPages: 1\n  }\n};\nexport const searchProduct = createAsyncThunk(\"productSearch/searchProduct\", async (paramaters, thunkAPI) => {\n  let url = `http://123.56.149.216:8080/api/touristRoutes?pageNumber=${paramaters.nextPage}&pageSize=${paramaters.pageSize}`;\n\n  if (paramaters.keywords) {\n    url += `&keyword=${paramaters.keywords}`;\n  }\n\n  const response = await axios.get(url);\n  return {\n    data: response.data,\n    pagination: JSON.parse(response.headers[\"x-pagination\"])\n  };\n});\nexport const ProductSearchSlice = createSlice({\n  name: \"productSearch\",\n  initialState,\n  reducers: {},\n  extraReducers: {\n    [searchProduct.pending.type]: state => {\n      state.loading = true;\n    },\n    [searchProduct.fulfilled.type]: (state, action) => {\n      state.loading = false;\n      state.data = action.payload.data;\n      state.pagination = action.payload.pagination;\n      state.error = null;\n    },\n    [searchProduct.rejected.type]: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    }\n  }\n});","map":{"version":3,"sources":["/Users/melony/Desktop/react 去哪项目/react-travel/src/redux/productSearch/slice.ts"],"names":["createSlice","createAsyncThunk","axios","initialState","loading","error","data","pagination","totalCount","pageSize","currentPage","totalPages","searchProduct","paramaters","thunkAPI","url","nextPage","keywords","response","get","JSON","parse","headers","ProductSearchSlice","name","reducers","extraReducers","pending","type","state","fulfilled","action","payload","rejected"],"mappings":"AAAA,SAASA,WAAT,EAAqCC,gBAArC,QAA6D,kBAA7D;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAQA,MAAMC,YAAgC,GAAG;AACrCC,EAAAA,OAAO,EAAE,KAD4B;AAErCC,EAAAA,KAAK,EAAE,IAF8B;AAGrCC,EAAAA,IAAI,EAAE,IAH+B;AAIrCC,EAAAA,UAAU,EAAE;AAEZC,IAAAA,UAAU,EAAC,EAFC;AAEEC,IAAAA,QAAQ,EAAC,EAFX;AAEcC,IAAAA,WAAW,EAAC,CAF1B;AAE4BC,IAAAA,UAAU,EAAC;AAFvC;AAJyB,CAAzC;AAUA,OAAO,MAAMC,aAAa,GAAGX,gBAAgB,CACzC,6BADyC,EAEzC,OAAOY,UAAP,EAIGC,QAJH,KAIe;AACX,MAAIC,GAAG,GAAG,2DAA0DF,UAAU,CAACG,QAAS,aAAYH,UAAU,CAACJ,QAAS,EAAxH;;AACA,MAAII,UAAU,CAACI,QAAf,EAAyB;AACrBF,IAAAA,GAAG,IAAK,YAAWF,UAAU,CAACI,QAAS,EAAvC;AACH;;AACD,QAAMC,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,GAAN,CAAUJ,GAAV,CAAvB;AACA,SAAO;AACHT,IAAAA,IAAI,EAAEY,QAAQ,CAACZ,IADZ;AAEHC,IAAAA,UAAU,EAAEa,IAAI,CAACC,KAAL,CAAWH,QAAQ,CAACI,OAAT,CAAiB,cAAjB,CAAX;AAFT,GAAP;AAIH,CAhBwC,CAAtC;AAqBP,OAAO,MAAMC,kBAAkB,GAAGvB,WAAW,CAAC;AAC1CwB,EAAAA,IAAI,EAAE,eADoC;AAE1CrB,EAAAA,YAF0C;AAG1CsB,EAAAA,QAAQ,EAAE,EAHgC;AAM1CC,EAAAA,aAAa,EAAE;AACX,KAACd,aAAa,CAACe,OAAd,CAAsBC,IAAvB,GAA+BC,KAAD,IAAU;AACpCA,MAAAA,KAAK,CAACzB,OAAN,GAAe,IAAf;AACH,KAHU;AAIX,KAACQ,aAAa,CAACkB,SAAd,CAAwBF,IAAzB,GAAgC,CAACC,KAAD,EAAQE,MAAR,KAAiB;AAC7CF,MAAAA,KAAK,CAACzB,OAAN,GAAgB,KAAhB;AACAyB,MAAAA,KAAK,CAACvB,IAAN,GAAayB,MAAM,CAACC,OAAP,CAAe1B,IAA5B;AACAuB,MAAAA,KAAK,CAACtB,UAAN,GAAmBwB,MAAM,CAACC,OAAP,CAAezB,UAAlC;AACAsB,MAAAA,KAAK,CAACxB,KAAN,GAAc,IAAd;AACH,KATU;AAUX,KAACO,aAAa,CAACqB,QAAd,CAAuBL,IAAxB,GAA+B,CAACC,KAAD,EAAQE,MAAR,KAAgD;AAE3EF,MAAAA,KAAK,CAACzB,OAAN,GAAgB,KAAhB;AACAyB,MAAAA,KAAK,CAACxB,KAAN,GAAa0B,MAAM,CAACC,OAApB;AACH;AAdU;AAN2B,CAAD,CAAtC","sourcesContent":["import { createSlice, PayloadAction, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\ninterface ProductSearchState {\n    loading: boolean,\n    error: string | null,\n    data: any,\n    pagination: any\n}\n\nconst initialState: ProductSearchState = {\n    loading: false,\n    error: null,\n    data: null,\n    pagination: {\n    \n    totalCount:16,pageSize:10,currentPage:1,totalPages:1}\n\n}\n\nexport const searchProduct = createAsyncThunk(\n    \"productSearch/searchProduct\",\n    async (paramaters: {\n        keywords: string,\n        nextPage: number | string,\n        pageSize: number | string\n    }, thunkAPI)=> {\n        let url =`http://123.56.149.216:8080/api/touristRoutes?pageNumber=${paramaters.nextPage}&pageSize=${paramaters.pageSize}`;\n        if (paramaters.keywords) {\n            url += `&keyword=${paramaters.keywords}`;\n        }\n        const response = await axios.get(url);\n        return {\n            data: response.data,\n            pagination: JSON.parse(response.headers[\"x-pagination\"])\n        }\n    }\n       \n)   \n    \n\nexport const ProductSearchSlice = createSlice({\n    name: \"productSearch\",\n    initialState,\n    reducers: {\n       \n    },\n    extraReducers: {\n        [searchProduct.pending.type]: (state)=> {\n            state.loading= true;\n        },\n        [searchProduct.fulfilled.type]: (state, action)=>{\n            state.loading = false;\n            state.data = action.payload.data;\n            state.pagination = action.payload.pagination\n            state.error = null\n        },\n        [searchProduct.rejected.type]: (state, action: PayloadAction<string | null>)=> {\n           \n            state.loading = false;\n            state.error= action.payload\n        }\n    }\n})"]},"metadata":{},"sourceType":"module"}