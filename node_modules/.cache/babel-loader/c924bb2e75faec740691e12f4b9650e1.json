{"ast":null,"code":"import _defineProperty from\"/Users/melony/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/melony/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/melony/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";var _extraReducers;import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import axios from'axios';var initialState={loading:false,error:null,data:null,pagination:{totalCount:16,pageSize:10,currentPage:1,totalPages:1}};export var searchProduct=createAsyncThunk(\"productSearch/searchProduct\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(paramaters,thunkAPI){var url,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"http://123.56.149.216:8080/api/touristRoutes?pageNumber=\".concat(paramaters.nextPage,\"&pageSize=\").concat(paramaters.pageSize);if(paramaters.keywords){url+=\"&keyword=\".concat(paramaters.keywords);}_context.next=4;return axios.get(url);case 4:response=_context.sent;return _context.abrupt(\"return\",{data:response.data,pagination:JSON.parse(response.headers[\"x-pagination\"])});case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());export var ProductSearchSlice=createSlice({name:\"productSearch\",initialState:initialState,reducers:{},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,searchProduct.pending.type,function(state){state.loading=true;}),_defineProperty(_extraReducers,searchProduct.fulfilled.type,function(state,action){state.loading=false;state.data=action.payload.data;state.pagination=action.payload.pagination;state.error=null;}),_defineProperty(_extraReducers,searchProduct.rejected.type,function(state,action){state.loading=false;state.error=action.payload;}),_extraReducers)});","map":{"version":3,"sources":["/Users/melony/Desktop/react-travel/src/redux/productSearch/slice.ts"],"names":["createSlice","createAsyncThunk","axios","initialState","loading","error","data","pagination","totalCount","pageSize","currentPage","totalPages","searchProduct","paramaters","thunkAPI","url","nextPage","keywords","get","response","JSON","parse","headers","ProductSearchSlice","name","reducers","extraReducers","pending","type","state","fulfilled","action","payload","rejected"],"mappings":"6dAAA,OAASA,WAAT,CAAqCC,gBAArC,KAA6D,kBAA7D,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAQA,GAAMC,CAAAA,YAAgC,CAAG,CACrCC,OAAO,CAAE,KAD4B,CAErCC,KAAK,CAAE,IAF8B,CAGrCC,IAAI,CAAE,IAH+B,CAIrCC,UAAU,CAAE,CAEZC,UAAU,CAAC,EAFC,CAEEC,QAAQ,CAAC,EAFX,CAEcC,WAAW,CAAC,CAF1B,CAE4BC,UAAU,CAAC,CAFvC,CAJyB,CAAzC,CAUA,MAAO,IAAMC,CAAAA,aAAa,CAAGX,gBAAgB,CACzC,6BADyC,0FAEzC,iBAAOY,UAAP,CAIGC,QAJH,mIAKQC,GALR,mEAKwEF,UAAU,CAACG,QALnF,sBAKwGH,UAAU,CAACJ,QALnH,EAMI,GAAII,UAAU,CAACI,QAAf,CAAyB,CACrBF,GAAG,qBAAgBF,UAAU,CAACI,QAA3B,CAAH,CACH,CARL,sBAS2Bf,CAAAA,KAAK,CAACgB,GAAN,CAAUH,GAAV,CAT3B,QASUI,QATV,+CAUW,CACHb,IAAI,CAAEa,QAAQ,CAACb,IADZ,CAEHC,UAAU,CAAEa,IAAI,CAACC,KAAL,CAAWF,QAAQ,CAACG,OAAT,CAAiB,cAAjB,CAAX,CAFT,CAVX,wDAFyC,mEAAtC,CAqBP,MAAO,IAAMC,CAAAA,kBAAkB,CAAGvB,WAAW,CAAC,CAC1CwB,IAAI,CAAE,eADoC,CAE1CrB,YAAY,CAAZA,YAF0C,CAG1CsB,QAAQ,CAAE,EAHgC,CAM1CC,aAAa,mDACRd,aAAa,CAACe,OAAd,CAAsBC,IADd,CACqB,SAACC,KAAD,CAAU,CACpCA,KAAK,CAACzB,OAAN,CAAe,IAAf,CACH,CAHQ,iCAIRQ,aAAa,CAACkB,SAAd,CAAwBF,IAJhB,CAIuB,SAACC,KAAD,CAAQE,MAAR,CAAiB,CAC7CF,KAAK,CAACzB,OAAN,CAAgB,KAAhB,CACAyB,KAAK,CAACvB,IAAN,CAAayB,MAAM,CAACC,OAAP,CAAe1B,IAA5B,CACAuB,KAAK,CAACtB,UAAN,CAAmBwB,MAAM,CAACC,OAAP,CAAezB,UAAlC,CACAsB,KAAK,CAACxB,KAAN,CAAc,IAAd,CACH,CATQ,iCAURO,aAAa,CAACqB,QAAd,CAAuBL,IAVf,CAUsB,SAACC,KAAD,CAAQE,MAAR,CAAgD,CAE3EF,KAAK,CAACzB,OAAN,CAAgB,KAAhB,CACAyB,KAAK,CAACxB,KAAN,CAAa0B,MAAM,CAACC,OAApB,CACH,CAdQ,iBAN6B,CAAD,CAAtC","sourcesContent":["import { createSlice, PayloadAction, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\ninterface ProductSearchState {\n    loading: boolean,\n    error: string | null,\n    data: any,\n    pagination: any\n}\n\nconst initialState: ProductSearchState = {\n    loading: false,\n    error: null,\n    data: null,\n    pagination: {\n    \n    totalCount:16,pageSize:10,currentPage:1,totalPages:1}\n\n}\n\nexport const searchProduct = createAsyncThunk(\n    \"productSearch/searchProduct\",\n    async (paramaters: {\n        keywords: string,\n        nextPage: number | string,\n        pageSize: number | string\n    }, thunkAPI)=> {\n        let url =`http://123.56.149.216:8080/api/touristRoutes?pageNumber=${paramaters.nextPage}&pageSize=${paramaters.pageSize}`;\n        if (paramaters.keywords) {\n            url += `&keyword=${paramaters.keywords}`;\n        }\n        const response = await axios.get(url);\n        return {\n            data: response.data,\n            pagination: JSON.parse(response.headers[\"x-pagination\"])\n        }\n    }\n       \n)   \n    \n\nexport const ProductSearchSlice = createSlice({\n    name: \"productSearch\",\n    initialState,\n    reducers: {\n       \n    },\n    extraReducers: {\n        [searchProduct.pending.type]: (state)=> {\n            state.loading= true;\n        },\n        [searchProduct.fulfilled.type]: (state, action)=>{\n            state.loading = false;\n            state.data = action.payload.data;\n            state.pagination = action.payload.pagination\n            state.error = null\n        },\n        [searchProduct.rejected.type]: (state, action: PayloadAction<string | null>)=> {\n           \n            state.loading = false;\n            state.error= action.payload\n        }\n    }\n})"]},"metadata":{},"sourceType":"module"}