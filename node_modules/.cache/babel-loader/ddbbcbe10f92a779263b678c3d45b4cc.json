{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst initialState = {\n  loading: true,\n  error: null,\n  items: []\n};\nexport const getShoppingCart = createAsyncThunk(\"shoppingCart/getShoppingCart\", async (jwt, thunkAPI) => {\n  const {\n    data\n  } = await axios.get(`http://123.56.149.216:8080/api/shoppingCart`, {\n    headers: {\n      Authorization: `bearer ${jwt}`\n    }\n  });\n  return data.shoppingCartItems;\n});\nexport const addShoppingCartItem = createAsyncThunk(\"shoppingCart/addShoppingCartItem\", async (parameters, thunkAPI) => {\n  const {\n    data\n  } = await axios.post(`http://123.56.149.216:8080/api/shoppingCart/items`, {\n    touristRouteId: parameters.touristRouteId\n  }, {\n    headers: {\n      Authorization: `bearer ${parameters.jwt}`\n    }\n  });\n  return data.shoppingCartItems;\n});\nexport const checkOut = createAsyncThunk(\"shoppingCart/checkOut\", async (jwt, thunkAPI) => {\n  const {\n    data\n  } = await axios.post(`http://123.56.149.216:8080/api/shoppingCart/checkout`, null, {\n    headers: {\n      Authorization: `bearer ${jwt}`\n    }\n  });\n  return data;\n});\nexport const clearShoppingCartItem = createAsyncThunk(\"shoppingCart/clearShoppingCartItem\", async (parameters, thunkAPI) => {\n  return await axios.delete(`http://123.56.149.216:8080/api/shoppingCart/items/(${parameters.itemIds.join(',')})`, {\n    headers: {\n      Authorization: `bearer ${parameters.jwt}`\n    }\n  });\n});\nexport const ShoppingCartSlice = createSlice({\n  name: \"shoppingCart\",\n  initialState,\n  reducers: {\n    addItem: (state, {\n      payload\n    }) => {\n      state.items.push(payload.product);\n    }\n  },\n  extraReducers: {\n    [getShoppingCart.pending.type]: state => {\n      state.loading = true;\n    },\n    [getShoppingCart.fulfilled.type]: (state, action) => {\n      state.loading = false;\n      state.items = action.payload;\n      state.error = null;\n    },\n    [getShoppingCart.rejected.type]: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    },\n    [addShoppingCartItem.pending.type]: state => {\n      state.loading = true;\n    },\n    [addShoppingCartItem.fulfilled.type]: (state, action) => {\n      state.loading = false;\n      state.items = action.payload;\n      state.error = null;\n    },\n    [addShoppingCartItem.rejected.type]: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    },\n    [clearShoppingCartItem.pending.type]: state => {\n      state.loading = true;\n    },\n    [clearShoppingCartItem.fulfilled.type]: state => {\n      state.loading = false;\n      state.items = [];\n      state.error = null;\n    },\n    [clearShoppingCartItem.rejected.type]: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    },\n    [checkOut.pending.type]: state => {\n      state.loading = true;\n    },\n    [checkOut.fulfilled.type]: (state, action) => {\n      state.loading = false;\n      state.items = [];\n      state.error = null;\n    },\n    [checkOut.rejected.type]: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    }\n  }\n});\nexport const {\n  addItem\n} = ShoppingCartSlice.actions;","map":{"version":3,"sources":["/Users/melony/Desktop/react-travel/src/redux/shoppingCart/slice.ts"],"names":["createSlice","createAsyncThunk","axios","initialState","loading","error","items","getShoppingCart","jwt","thunkAPI","data","get","headers","Authorization","shoppingCartItems","addShoppingCartItem","parameters","post","touristRouteId","checkOut","clearShoppingCartItem","delete","itemIds","join","ShoppingCartSlice","name","reducers","addItem","state","payload","push","product","extraReducers","pending","type","fulfilled","action","rejected","actions"],"mappings":"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","sourcesContent":["import { createSlice, PayloadAction, createAsyncThunk, createAction } from '@reduxjs/toolkit';\nimport axios from 'axios';\ninterface ShoppingCartState {\n    loading: boolean,\n    error: string | null,\n    items: any[]\n}\n\nconst initialState: ShoppingCartState = {\n    loading: true,\n    error: null,\n    items: []\n\n}\n\nexport const getShoppingCart = createAsyncThunk(\n    \"shoppingCart/getShoppingCart\",\n    async (jwt: string, thunkAPI)=> {\n        const{data}= await axios.get(`http://123.56.149.216:8080/api/shoppingCart`,{\n            headers:{\n                Authorization: `bearer ${jwt}`\n            }\n        });\n        return data.shoppingCartItems;\n            }\n) ;  \n\nexport const addShoppingCartItem = createAsyncThunk(\n    \"shoppingCart/addShoppingCartItem\",\n    async (parameters: {jwt: string, touristRouteId: string}, thunkAPI)=> {\n        const{data}= await axios.post(`http://123.56.149.216:8080/api/shoppingCart/items`,{\n           touristRouteId: parameters.touristRouteId\n        },\n        {\n            headers:{\n                Authorization: `bearer ${parameters.jwt}`\n            }\n        });\n        return data.shoppingCartItems;\n            }\n) ; \n\n\n\n\n\nexport const checkOut = createAsyncThunk(\n    \"shoppingCart/checkOut\",\n    async ( jwt: string, thunkAPI)=> {\n        const{data}= await axios.post(`http://123.56.149.216:8080/api/shoppingCart/checkout`,null,\n        {\n            headers:{\n                Authorization: `bearer ${jwt}`\n            }\n        });\n        return data;\n            }\n) ; \n    \nexport const clearShoppingCartItem = createAsyncThunk(\n    \"shoppingCart/clearShoppingCartItem\",\n    async (parameters: {jwt: string; itemIds: number[]}, thunkAPI)=> {\n        return await axios.delete(`http://123.56.149.216:8080/api/shoppingCart/items/(${parameters.itemIds.join(',')})`,\n        {\n            headers:{\n                Authorization: `bearer ${parameters.jwt}`\n            }\n        });\n       \n            }\n) ; \n\nexport const ShoppingCartSlice = createSlice({\n    name: \"shoppingCart\",\n    initialState,\n    reducers: {\n       addItem: (state,{payload})=> {\n          state.items.push(payload.product)\n       }\n    },\n    extraReducers: {\n        [getShoppingCart.pending.type]: (state)=> {\n            state.loading= true;\n        },\n        [getShoppingCart.fulfilled.type]: (state, action)=>{\n            state.loading = false;\n            state.items = action.payload;\n            state.error = null\n        },\n        [getShoppingCart.rejected.type]: (state, action: PayloadAction<string | null>)=> {\n           \n            state.loading = false;\n            state.error= action.payload\n        },\n        [addShoppingCartItem.pending.type]: (state)=> {\n            state.loading= true;\n        },\n        [addShoppingCartItem.fulfilled.type]: (state, action)=>{\n            state.loading = false;\n            state.items = action.payload;\n            state.error = null\n        },\n        [addShoppingCartItem.rejected.type]: (state, action: PayloadAction<string | null>)=> {\n           \n            state.loading = false;\n            state.error= action.payload\n        },\n        [clearShoppingCartItem.pending.type]: (state)=> {\n            state.loading= true;\n        },\n        [clearShoppingCartItem.fulfilled.type]: (state)=>{\n            state.loading = false;\n            state.items = [];\n            state.error = null\n        },\n        [clearShoppingCartItem.rejected.type]: (state, action: PayloadAction<string | null>)=> {\n           \n            state.loading = false;\n            state.error= action.payload\n        },\n        [checkOut.pending.type]: (state)=> {\n            state.loading= true;\n        },\n        [checkOut.fulfilled.type]: (state, action)=>{\n            state.loading = false;\n            state.items = [];\n            state.error = null\n        },\n        [checkOut.rejected.type]: (state, action: PayloadAction<string | null>)=> {\n           \n            state.loading = false;\n            state.error= action.payload\n        },\n    }\n})\n\nexport const {addItem} = ShoppingCartSlice.actions;"]},"metadata":{},"sourceType":"module"}