{"ast":null,"code":"import _objectSpread from\"/Users/melony/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/Users/melony/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"component\",\"isAuthenticated\"];import React,{useEffect}from'react';import styles from'./App.module.css';import{BrowserRouter,Route,Switch,Redirect}from'react-router-dom';import{HomePage,Register,SignIn,Detail,Search,ShoppingCart,PlaceOrder}from'./pages';import{useSelector}from'./redux/hooks';import{useDispatch}from'react-redux';import{getShoppingCart}from'./redux/shoppingCart/slice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PrivateRoute=function PrivateRoute(_ref){var component=_ref.component,isAuthenticated=_ref.isAuthenticated,rest=_objectWithoutProperties(_ref,_excluded);var routeComponent=function routeComponent(props){return isAuthenticated?/*#__PURE__*/React.createElement(component,props):/*#__PURE__*/_jsx(Redirect,{to:{pathname:'/signIn'}});};return/*#__PURE__*/_jsx(Route,_objectSpread({render:routeComponent},rest));};function App(){var jwt=useSelector(function(state){return state.user.token;});var dispatch=useDispatch();useEffect(function(){if(jwt){dispatch(getShoppingCart(jwt));}},[jwt]);return/*#__PURE__*/_jsx(\"div\",{className:styles.App,children:/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,component:HomePage}),/*#__PURE__*/_jsx(Route,{path:\"/signin\",exact:true,component:SignIn}),/*#__PURE__*/_jsx(Route,{path:\"/register\",exact:true,component:Register}),/*#__PURE__*/_jsx(Route,{path:\"/detail/:touristRouteId\",exact:true,component:Detail}),/*#__PURE__*/_jsx(Route,{path:\"/search/:keywords?\",exact:true,component:Search}),/*#__PURE__*/_jsx(PrivateRoute,{isAuthenticated:jwt!==null,path:\"/shoppingCart\",component:ShoppingCart}),/*#__PURE__*/_jsx(PrivateRoute,{isAuthenticated:jwt!==null,path:\"/placeOrder\",component:PlaceOrder}),/*#__PURE__*/_jsx(Route,{render:function render(){return/*#__PURE__*/_jsx(\"h1\",{children:\"404 not found\"});}})]})})});}export default App;","map":{"version":3,"sources":["/Users/melony/Desktop/react-travel/src/App.tsx"],"names":["React","useEffect","styles","BrowserRouter","Route","Switch","Redirect","HomePage","Register","SignIn","Detail","Search","ShoppingCart","PlaceOrder","useSelector","useDispatch","getShoppingCart","PrivateRoute","component","isAuthenticated","rest","routeComponent","props","createElement","pathname","App","jwt","state","user","token","dispatch"],"mappings":"mXAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,CACA,OAAQC,aAAR,CAAuBC,KAAvB,CAA8BC,MAA9B,CAAsCC,QAAtC,KAAqD,kBAArD,CACA,OAASC,QAAT,CAAmBC,QAAnB,CAA6BC,MAA7B,CAAqCC,MAArC,CAA6CC,MAA7C,CAAqDC,YAArD,CAAmEC,UAAnE,KAAoF,SAApF,CACA,OAASC,WAAT,KAA4B,eAA5B,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,eAAT,KAAgC,4BAAhC,C,wFAEA,GAAMC,CAAAA,YAAY,CAAE,QAAdA,CAAAA,YAAc,MAA2C,IAAzCC,CAAAA,SAAyC,MAAzCA,SAAyC,CAA9BC,eAA8B,MAA9BA,eAA8B,CAAVC,IAAU,0CAC7D,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,KAAD,CAAU,CAC/B,MAAOH,CAAAA,eAAe,cAAInB,KAAK,CAACuB,aAAN,CAAoBL,SAApB,CAA8BI,KAA9B,CAAJ,cACrB,KAAC,QAAD,EAAU,EAAE,CAAE,CAACE,QAAQ,CAAC,SAAV,CAAd,EADD,CAED,CAHD,CAIA,mBAAO,KAAC,KAAD,gBAAO,MAAM,CAAEH,cAAf,EAAmCD,IAAnC,EAAP,CACD,CAND,CAOA,QAASK,CAAAA,GAAT,EAAe,CACb,GAAMC,CAAAA,GAAG,CAAGZ,WAAW,CAAC,SAAAa,KAAK,QAAGA,CAAAA,KAAK,CAACC,IAAN,CAAWC,KAAd,EAAN,CAAvB,CACA,GAAMC,CAAAA,QAAQ,CAAGf,WAAW,EAA5B,CACAd,SAAS,CAAC,UAAK,CACb,GAAGyB,GAAH,CAAQ,CACNI,QAAQ,CAACd,eAAe,CAACU,GAAD,CAAhB,CAAR,CACD,CACF,CAJQ,CAIP,CAACA,GAAD,CAJO,CAAT,CAKA,mBACE,YAAK,SAAS,CAAExB,MAAM,CAACuB,GAAvB,uBACC,KAAC,aAAD,wBACA,MAAC,MAAD,yBACC,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,KAAK,KAArB,CAAsB,SAAS,CAAElB,QAAjC,EADD,cAEC,KAAC,KAAD,EAAO,IAAI,CAAC,SAAZ,CAAsB,KAAK,KAA3B,CAA4B,SAAS,CAAEE,MAAvC,EAFD,cAGC,KAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAwB,KAAK,KAA7B,CAA8B,SAAS,CAAED,QAAzC,EAHD,cAIC,KAAC,KAAD,EAAO,IAAI,CAAC,yBAAZ,CAAsC,KAAK,KAA3C,CAA4C,SAAS,CAAEE,MAAvD,EAJD,cAKC,KAAC,KAAD,EAAO,IAAI,CAAC,oBAAZ,CAAiC,KAAK,KAAtC,CAAuC,SAAS,CAAEC,MAAlD,EALD,cAMC,KAAC,YAAD,EACA,eAAe,CAAGe,GAAG,GAAG,IADxB,CAEA,IAAI,CAAC,eAFL,CAEqB,SAAS,CAAEd,YAFhC,EAND,cASC,KAAC,YAAD,EACA,eAAe,CAAGc,GAAG,GAAG,IADxB,CAEA,IAAI,CAAC,aAFL,CAEmB,SAAS,CAAEb,UAF9B,EATD,cAYC,KAAC,KAAD,EAAO,MAAM,CAAE,qCAAI,qCAAJ,EAAf,EAZD,GADA,EADD,EADF,CAsBD,CAED,cAAeY,CAAAA,GAAf","sourcesContent":["import React, {useEffect} from 'react';\nimport logo from './logo.svg';\nimport styles from './App.module.css';\nimport {BrowserRouter, Route, Switch, Redirect} from 'react-router-dom';\nimport { HomePage, Register, SignIn ,Detail, Search, ShoppingCart, PlaceOrder} from './pages';\nimport { useSelector } from './redux/hooks';\nimport { useDispatch } from 'react-redux';\nimport { getShoppingCart } from './redux/shoppingCart/slice';\n\nconst PrivateRoute =({component, isAuthenticated, ...rest}) => {\n  const routeComponent = (props)=> {\n    return isAuthenticated ? (React.createElement(component,props) ): \n    (<Redirect to={{pathname:'/signIn'}}/>)\n  }\n  return <Route render={routeComponent} {...rest}/>\n}\nfunction App() {\n  const jwt = useSelector(state=> state.user.token);\n  const dispatch = useDispatch();\n  useEffect(()=> {\n    if(jwt) {\n      dispatch(getShoppingCart(jwt));\n    }\n  },[jwt])\n  return (\n    <div className={styles.App}>\n     <BrowserRouter>\n     <Switch>\n      <Route path='/' exact component={HomePage}/>\n      <Route path='/signin' exact component={SignIn}/>\n      <Route path='/register' exact component={Register}/>\n      <Route path='/detail/:touristRouteId' exact component={Detail}/>\n      <Route path='/search/:keywords?' exact component={Search}/>\n      <PrivateRoute \n      isAuthenticated={ jwt!==null}\n      path='/shoppingCart' component={ShoppingCart}/>\n      <PrivateRoute \n      isAuthenticated={ jwt!==null}\n      path='/placeOrder' component={PlaceOrder}/>\n      <Route render={()=><h1>404 not found</h1>}></Route>\n     \n      </Switch>\n     </BrowserRouter>\n    </div>\n\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}