{"ast":null,"code":"var _jsxFileName = \"/Users/melony/Desktop/react-travel/src/pages/home/HomePage.tsx\";\nimport React from \"react\";\nimport { Header, Footer, Carousel, SideMenu, ProductCollection } from \"../../components\";\nimport { Row, Col, Typography, Spin } from \"antd\";\nimport sideImage from \"../../assets/images/sider_2019_12-09.png\";\nimport sideImage2 from \"../../assets/images/sider_2019_02-04.png\";\nimport sideImage3 from \"../../assets/images/sider_2019_02-04-2.png\";\nimport styles from \"./HomePage.module.css\";\nimport { withTranslation } from \"react-i18next\";\nimport axios from \"axios\";\nimport { connect } from \"react-redux\";\nimport { fetchRecommendProductsStartActionCreator, fetchRecommendProductsSuccessActionCreator, fetchRecommendProductsFailActionCreator } from '../../redux/recommendProducts/recommendProductsActions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass HomePageComponent extends React.Component {\n  // constructor(props) {\n  //   super(props)\n  //   this.state= {\n  //     productList:[],\n  //     loading: true,\n  //     error:null\n  //   }\n  // }\n  async componentDidMount() {\n    this.props.fetchStart();\n\n    try {\n      const {\n        data\n      } = await axios.get(\"http://123.56.149.216:8080/api/productCollections\" // headers: {\n      //   \"x-icode\":\"834F0DCE8A5149C0\"\n      // }\n      );\n      this.props.fetchSuccess(data); // this.setState({\n      //   loading: false,\n      //   error: null,\n      //   productList:data\n      // });\n    } catch (err) {\n      if (err instanceof Error) {\n        this.props.fetchFail(err); // this.setState({\n        //   error: err.message,\n        //   loading: false\n        // })\n      }\n    }\n  }\n\n  render() {\n    // console.log(this.props.t)\n    const {\n      t\n    } = this.props;\n    const {\n      productList,\n      loading,\n      error\n    } = this.props;\n\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(Spin, {\n        size: \"large\",\n        style: {\n          marginTop: 200,\n          marginBottom: 200,\n          marginLeft: \"auto\",\n          marginRight: \"auto\",\n          width: \"100%\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this);\n    } else if (error) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"something is error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles[\"page-content\"],\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            style: {\n              marginTop: 20\n            },\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              span: 6,\n              children: /*#__PURE__*/_jsxDEV(SideMenu, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              span: 18,\n              children: /*#__PURE__*/_jsxDEV(Carousel, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ProductCollection, {\n            title: /*#__PURE__*/_jsxDEV(Typography.Title, {\n              level: 3,\n              type: \"warning\",\n              children: t(\"home_page.hot_recommended\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 17\n            }, this),\n            sideImage: sideImage,\n            products: productList[0].touristRoutes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ProductCollection, {\n            title: /*#__PURE__*/_jsxDEV(Typography.Title, {\n              level: 3,\n              type: \"danger\",\n              children: t(\"home_page.new_arrival\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 17\n            }, this),\n            sideImage: sideImage2,\n            products: productList[1].touristRoutes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ProductCollection, {\n            title: /*#__PURE__*/_jsxDEV(Typography.Title, {\n              level: 3,\n              type: \"success\",\n              children: t(\"home_page.domestic_travel\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 17\n            }, this),\n            sideImage: sideImage3,\n            products: productList[2].touristRoutes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true);\n    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    productList: state.recommendProducts,\n    loading: state.recommendProducts.loading,\n    error: state.recommendProducts.error\n  };\n};\n\nconst mapStateToDispatch = dispatch => {\n  return {\n    fetchStart: () => {\n      dispatch(fetchRecommendProductsStartActionCreator);\n    },\n    fetchSuccess: data => {\n      dispatch(fetchRecommendProductsSuccessActionCreator(data));\n    },\n    fetchFail: error => {\n      dispatch(fetchRecommendProductsFailActionCreator(error));\n    }\n  };\n};\n\nexport const HomePage = connect(mapStateToProps, mapStateToDispatch)(withTranslation()(HomePageComponent));","map":{"version":3,"sources":["/Users/melony/Desktop/react-travel/src/pages/home/HomePage.tsx"],"names":["React","Header","Footer","Carousel","SideMenu","ProductCollection","Row","Col","Typography","Spin","sideImage","sideImage2","sideImage3","styles","withTranslation","axios","connect","fetchRecommendProductsStartActionCreator","fetchRecommendProductsSuccessActionCreator","fetchRecommendProductsFailActionCreator","HomePageComponent","Component","componentDidMount","props","fetchStart","data","get","fetchSuccess","err","Error","fetchFail","render","t","productList","loading","error","marginTop","marginBottom","marginLeft","marginRight","width","touristRoutes","mapStateToProps","state","recommendProducts","mapStateToDispatch","dispatch","HomePage"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  Header,\n  Footer,\n  Carousel,\n  SideMenu,\n  ProductCollection,\n  \n} from \"../../components\";\nimport { Row, Col, Typography, Spin } from \"antd\";\nimport { productList1, productList2, productList3 } from \"./mockups\";\nimport sideImage from \"../../assets/images/sider_2019_12-09.png\";\nimport sideImage2 from \"../../assets/images/sider_2019_02-04.png\";\nimport sideImage3 from \"../../assets/images/sider_2019_02-04-2.png\";\nimport styles from \"./HomePage.module.css\";\nimport { withTranslation, WithTranslation } from \"react-i18next\";\nimport axios from \"axios\";\nimport {connect} from \"react-redux\";\nimport { fetchRecommendProductsStartActionCreator , fetchRecommendProductsSuccessActionCreator, fetchRecommendProductsFailActionCreator} from '../../redux/recommendProducts/recommendProductsActions';\nimport {RootState} from '../../redux/store';\n// interface State {\n//   productList: any[],\n//   error: string | null,\n//   loading: boolean\n// }\n\ntype PropTypes = WithTranslation & ReturnType<typeof mapStateToProps> & ReturnType<typeof mapStateToDispatch>;\nclass HomePageComponent extends React.Component<PropTypes> {\n\n  // constructor(props) {\n  //   super(props)\n  //   this.state= {\n  //     productList:[],\n  //     loading: true,\n  //     error:null\n  //   }\n  // }\n\n  async componentDidMount () {\n    this.props.fetchStart()\n    try {\n   const {data} = await axios.get(\"http://123.56.149.216:8080/api/productCollections\"\n      // headers: {\n      //   \"x-icode\":\"834F0DCE8A5149C0\"\n      // }\n    );\n    this.props.fetchSuccess(data);\n    // this.setState({\n    //   loading: false,\n    //   error: null,\n    //   productList:data\n    // });\n  } catch (err) {\n    if( err instanceof Error) {\n      this.props.fetchFail(err)\n      // this.setState({\n      //   error: err.message,\n      //   loading: false\n      // })\n    }\n   \n  }\n  }\n\n\n\n  render() {\n    // console.log(this.props.t)\n    const { t } = this.props;\n    const { productList, loading, error } = this.props;\n    if( loading) {\n      return (\n        <Spin\n        size=\"large\"\n        style={{\n          marginTop: 200,\n          marginBottom: 200,\n          marginLeft: \"auto\",\n          marginRight:\"auto\",\n          width: \"100%\"\n        }}\n        />\n      )\n    }\n    else if( error ) {\n      return <div>something is error</div>\n    }else {\n    \n      return (\n        <>\n          <Header />\n          {/* 页面内容 content */}\n          <div className={styles[\"page-content\"]}>\n            <Row style={{ marginTop: 20 }}>\n              <Col span={6}>\n                <SideMenu />\n              </Col>\n              <Col span={18}>\n                <Carousel />\n              </Col>\n            </Row>\n            <ProductCollection\n              title={\n                <Typography.Title level={3} type=\"warning\">\n                  {t(\"home_page.hot_recommended\")}\n                </Typography.Title>\n              }\n              sideImage={sideImage}\n              products={productList[0].touristRoutes}\n            />\n            <ProductCollection\n              title={\n                <Typography.Title level={3} type=\"danger\">\n                  {t(\"home_page.new_arrival\")}\n                </Typography.Title>\n              }\n              sideImage={sideImage2}\n              products={productList[1].touristRoutes}\n            />\n            <ProductCollection\n              title={\n                <Typography.Title level={3} type=\"success\">\n                  {t(\"home_page.domestic_travel\")}\n                </Typography.Title>\n              }\n              sideImage={sideImage3}\n              products={productList[2].touristRoutes}\n            />\n           \n          </div>\n          <Footer />\n        </>\n      ); \n            }\n    \n    \n  }\n}\n\nconst mapStateToProps =(state : RootState)=> {\n  return {\n    productList: state.recommendProducts,\n    loading: state.recommendProducts.loading,\n    error: state.recommendProducts.error\n  }\n}\n\nconst mapStateToDispatch =(dispatch)=> {\n  return {\n    fetchStart: ()=> {\n      dispatch(fetchRecommendProductsStartActionCreator)\n    },\n    fetchSuccess: (data)=> {\n      dispatch(fetchRecommendProductsSuccessActionCreator(data))\n    },\n    fetchFail: (error)=> {\n      dispatch(fetchRecommendProductsFailActionCreator(error))\n    }\n    \n  }\n}\n\nexport const HomePage = connect(mapStateToProps, mapStateToDispatch)(withTranslation()(HomePageComponent));"]},"metadata":{},"sourceType":"module"}