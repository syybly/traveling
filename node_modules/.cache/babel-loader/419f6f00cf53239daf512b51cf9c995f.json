{"ast":null,"code":"import React from'react';import styles from'./ShoppingCart.module.css';import{MainLayout}from'../../layout/mainLayout';import{Row,Col,Affix}from'antd';import{ProductList,PaymentCard}from'../../components';import{useSelector}from'../../redux/hooks';import{useDispatch}from'react-redux';import{clearShoppingCartItem,checkOut}from'../../redux/shoppingCart/slice';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ShoppingCart=function ShoppingCart(props){var loading=useSelector(function(state){return state.shoppingCart.loading;});var shoppingCartItems=useSelector(function(state){return state.shoppingCart.items;});var jwt=useSelector(function(state){return state.user.token;});var dispatch=useDispatch();var history=useHistory();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(MainLayout,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(\"div\",{className:styles[\"product-list-container\"],children:/*#__PURE__*/_jsx(ProductList,{data:shoppingCartItems.map(function(s){return s.touristRoute;})})})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Affix,{children:/*#__PURE__*/_jsx(\"div\",{className:styles[\"payment-card-container\"],children:/*#__PURE__*/_jsx(PaymentCard,{loading:loading,originalPrice:shoppingCartItems.map(function(s){return s.originalPrice;}).reduce(function(a,b){return a+b;},0),price:shoppingCartItems.map(function(s){return s.originalPrice*(s.discountPresent?s.discountPresent:1);}).reduce(function(a,b){return a+b;},0),onCheckout:function onCheckout(){if(shoppingCartItems.length<=0){return;}dispatch(checkOut(jwt));history.push('/placeOrder');},onShoppingCartClear:function onShoppingCartClear(){dispatch(clearShoppingCartItem({jwt:jwt,itemIds:shoppingCartItems.map(function(s){return s.id;})}));}})})})})]})})});};","map":{"version":3,"sources":["/Users/melony/Desktop/react-travel/src/pages/shoppingCart/ShoppingCart.tsx"],"names":["React","styles","MainLayout","Row","Col","Affix","ProductList","PaymentCard","useSelector","useDispatch","clearShoppingCartItem","checkOut","useHistory","ShoppingCart","props","loading","state","shoppingCart","shoppingCartItems","items","jwt","user","token","dispatch","history","map","s","touristRoute","originalPrice","reduce","a","b","discountPresent","length","push","itemIds","id"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,2BAAnB,CACA,OAASC,UAAT,KAA2B,yBAA3B,CACA,OAAQC,GAAR,CAAYC,GAAZ,CAAiBC,KAAjB,KAA6B,MAA7B,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,kBAAzC,CACA,OAASC,WAAT,KAA4B,mBAA5B,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,qBAAT,CAAgCC,QAAhC,KAAgD,gCAAhD,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,wFACA,MAAO,IAAMC,CAAAA,YAAsB,CAAE,QAAxBA,CAAAA,YAAwB,CAACC,KAAD,CAAU,CAC3C,GAAMC,CAAAA,OAAO,CAAGP,WAAW,CAAC,SAAAQ,KAAK,QAAGA,CAAAA,KAAK,CAACC,YAAN,CAAmBF,OAAtB,EAAN,CAA3B,CACA,GAAMG,CAAAA,iBAAiB,CAAGV,WAAW,CAAC,SAAAQ,KAAK,QAAGA,CAAAA,KAAK,CAACC,YAAN,CAAmBE,KAAtB,EAAN,CAArC,CACA,GAAMC,CAAAA,GAAG,CAAGZ,WAAW,CAAC,SAAAQ,KAAK,QAAIA,CAAAA,KAAK,CAACK,IAAN,CAAWC,KAAf,EAAN,CAAvB,CACA,GAAMC,CAAAA,QAAQ,CAAGd,WAAW,EAA5B,CACA,GAAMe,CAAAA,OAAO,CAAGZ,UAAU,EAA1B,CACA,mBACI,kCACI,KAAC,UAAD,wBACI,MAAC,GAAD,yBACI,KAAC,GAAD,EAAK,IAAI,CAAE,EAAX,uBACI,YAAK,SAAS,CAAEX,MAAM,CAAC,wBAAD,CAAtB,uBACA,KAAC,WAAD,EACA,IAAI,CAAIiB,iBAAiB,CAACO,GAAlB,CAAsB,SAAAC,CAAC,QAAEA,CAAAA,CAAC,CAACC,YAAJ,EAAvB,CADR,EADA,EADJ,EADJ,cAQI,KAAC,GAAD,EAAK,IAAI,CAAE,CAAX,uBACI,KAAC,KAAD,wBACA,YAAK,SAAS,CAAE1B,MAAM,CAAC,wBAAD,CAAtB,uBACA,KAAC,WAAD,EACA,OAAO,CAAIc,OADX,CAEA,aAAa,CAAIG,iBAAiB,CAACO,GAAlB,CAAsB,SAAAC,CAAC,QAAGA,CAAAA,CAAC,CAACE,aAAL,EAAvB,EAA2CC,MAA3C,CAAkD,SAACC,CAAD,CAAGC,CAAH,QAAQD,CAAAA,CAAC,CAACC,CAAV,EAAlD,CAA+D,CAA/D,CAFjB,CAGA,KAAK,CAAIb,iBAAiB,CAACO,GAAlB,CAAsB,SAAAC,CAAC,QAAGA,CAAAA,CAAC,CAACE,aAAF,EAAmBF,CAAC,CAACM,eAAF,CAAmBN,CAAC,CAACM,eAArB,CAAuC,CAA1D,CAAH,EAAvB,EAAyFH,MAAzF,CAAgG,SAACC,CAAD,CAAGC,CAAH,QAAQD,CAAAA,CAAC,CAACC,CAAV,EAAhG,CAA6G,CAA7G,CAHT,CAIA,UAAU,CAAI,qBAAK,CACf,GAAGb,iBAAiB,CAACe,MAAlB,EAA0B,CAA7B,CAAgC,CAC5B,OACH,CACDV,QAAQ,CAACZ,QAAQ,CAACS,GAAD,CAAT,CAAR,CACAI,OAAO,CAACU,IAAR,CAAa,aAAb,EACH,CAVD,CAWA,mBAAmB,CAAG,8BAAK,CACvBX,QAAQ,CAACb,qBAAqB,CAAC,CAACU,GAAG,CAAHA,GAAD,CAAMe,OAAO,CAAEjB,iBAAiB,CAACO,GAAlB,CAAsB,SAAAC,CAAC,QAAEA,CAAAA,CAAC,CAACU,EAAJ,EAAvB,CAAf,CAAD,CAAtB,CAAR,CACH,CAbD,EADA,EADA,EADJ,EARJ,GADJ,EADJ,EADJ,CAoCH,CA1CM","sourcesContent":["import React from 'react';\nimport styles from './ShoppingCart.module.css';\nimport { MainLayout } from '../../layout/mainLayout';\nimport {Row,Col, Affix} from 'antd';\nimport { ProductList, PaymentCard } from '../../components';\nimport { useSelector } from '../../redux/hooks';\nimport { useDispatch } from 'react-redux';\nimport { clearShoppingCartItem, checkOut } from '../../redux/shoppingCart/slice';\nimport { useHistory } from 'react-router-dom';\nexport const ShoppingCart :React.FC =(props)=> {\n    const loading = useSelector(state=> state.shoppingCart.loading);\n    const shoppingCartItems = useSelector(state=> state.shoppingCart.items);\n    const jwt = useSelector(state => state.user.token) as string;\n    const dispatch = useDispatch();\n    const history = useHistory();\n    return (\n        <div>\n            <MainLayout>\n                <Row>\n                    <Col span={16}>\n                        <div className={styles[\"product-list-container\"]}>\n                        <ProductList \n                        data = {shoppingCartItems.map(s=>s.touristRoute)}\n                        />\n                        </div>\n                    </Col>\n                    <Col span={8}>\n                        <Affix>\n                        <div className={styles[\"payment-card-container\"]}>\n                        <PaymentCard \n                        loading = {loading}\n                        originalPrice = {shoppingCartItems.map(s=> s.originalPrice).reduce((a,b)=> a+b, 0)}\n                        price = {shoppingCartItems.map(s=> s.originalPrice * (s.discountPresent? s.discountPresent : 1 )).reduce((a,b)=> a+b, 0)}\n                        onCheckout = {()=> {\n                            if(shoppingCartItems.length<=0) {\n                                return \n                            }\n                            dispatch(checkOut(jwt));\n                            history.push('/placeOrder')\n                        }}\n                        onShoppingCartClear ={()=> {\n                            dispatch(clearShoppingCartItem({jwt, itemIds: shoppingCartItems.map(s=>s.id)}))\n                        }}\n                        />\n                        </div>\n                        </Affix>\n                    </Col>\n                </Row>\n            </MainLayout>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}