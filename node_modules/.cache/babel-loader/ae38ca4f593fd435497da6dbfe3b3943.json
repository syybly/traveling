{"ast":null,"code":"var _jsxFileName = \"/Users/melony/Desktop/react-travel/src/components/header/Header.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport styles from \"./Header.module.css\";\nimport logo from \"../../assets/logo.svg\";\nimport { Layout, Typography, Input, Menu, Button, Dropdown } from \"antd\";\nimport { GlobalOutlined } from \"@ant-design/icons\";\nimport { useHistory, useLocation, useParams, useRouteMatch } from \"react-router-dom\";\nimport { useSelector } from \"../../redux/hooks\";\nimport { useDispatch } from \"react-redux\";\nimport { addLanguageActionCreator, changeLanguageActionCreator } from \"../../redux/language/languageActions\";\nimport { useTranslation } from \"react-i18next\";\nimport MenuItem from \"antd/lib/menu/MenuItem\";\nimport jwt_decode from 'jwt-decode';\nimport { UserSlice } from \"../../redux/user/slice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Header = () => {\n  _s();\n\n  const history = useHistory();\n  const location = useLocation();\n  const params = useParams();\n  const match = useRouteMatch();\n  const language = useSelector(state => state.language.language);\n  const languageList = useSelector(state => state.language.languageList);\n  const dispatch = useDispatch();\n  const {\n    t\n  } = useTranslation(); //const dispatch = useDispatch<Dispatch<LanguageActionTypes>>()\n\n  const jwt = useSelector(state => state.user.token);\n  const [username, setUsername] = useState(\"\");\n  const shoppingCartItems = useSelector(state => state.shoppingCart.items);\n  const shoppingCartLoading = useSelector(state => state.shoppingCart.loading);\n  useEffect(() => {\n    if (jwt) {\n      const token = jwt_decode(jwt);\n      setUsername(token.username);\n    }\n  }, [jwt]);\n\n  const menuClickHandler = e => {\n    if (e.key === \"new\") {\n      dispatch(addLanguageActionCreator(\"new_language\", \"new_lang\"));\n    } else {\n      dispatch(changeLanguageActionCreator(e.key));\n    }\n  };\n\n  const onLogout = () => {\n    dispatch(UserSlice.actions.logOut());\n    history.push('/');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles[\"app-header\"],\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles[\"top-header\"],\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.inner,\n        children: [/*#__PURE__*/_jsxDEV(Typography.Text, {\n          children: t(\"header.slogan\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Dropdown.Button, {\n          style: {\n            marginLeft: 15\n          },\n          overlay: /*#__PURE__*/_jsxDEV(Menu, {\n            onClick: menuClickHandler,\n            children: [languageList.map(item => {\n              return /*#__PURE__*/_jsxDEV(Menu.Item, {\n                children: item.name\n              }, item.code, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 27\n              }, this);\n            }), /*#__PURE__*/_jsxDEV(MenuItem, {\n              children: t(\"header.add_new_language\")\n            }, \"new\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this),\n          icon: /*#__PURE__*/_jsxDEV(GlobalOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 19\n          }, this),\n          children: language === \"zh\" ? \"中文\" : \"english\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), jwt ? /*#__PURE__*/_jsxDEV(Button.Group, {\n          className: styles[\"button-group\"],\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [t(\"header.welcome\"), \"\\xA0\\xA0\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 14\n          }, this), /*#__PURE__*/_jsxDEV(Typography.Text, {\n            strong: true,\n            children: username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 14\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              loading: shoppingCartLoading,\n              onClick: () => {\n                history.push('/shoppingCart');\n              },\n              children: [t(\"header.shoppingCart\"), \"(\", shoppingCartItems.length, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: onLogout,\n              children: t(\"header.singOut\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 14\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 14\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 12\n        }, this) : /*#__PURE__*/_jsxDEV(Button.Group, {\n          className: styles[\"button-group\"],\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => history.push(\"/register\"),\n              children: [\" \", t(\"header.register\")]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 12\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => history.push(\"/signIn\"),\n              children: t(\"header.signin\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 12\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Layout.Header, {\n      className: styles[\"main-header\"],\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: () => history.push(\"/\"),\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: logo,\n          alt: \"logo\",\n          className: styles[\"App-logo\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography.Title, {\n          level: 3,\n          className: styles.title,\n          children: t(\"header.title\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input.Search, {\n        placeholder: \"Please enter into your destination\",\n        className: styles[\"search-input\"],\n        onSearch: keywords => {\n          history.push(\"/search/\" + keywords);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n      mode: \"horizontal\",\n      className: styles[\"main-menu\"],\n      children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: [\" \", t(\"header.home_page\"), \" \"]\n      }, \"1\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: [\" \", t(\"header.weekend\"), \" \"]\n      }, \"2\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: [\" \", t(\"header.group\"), \" \"]\n      }, \"3\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: [\" \", t(\"header.backpack\"), \" \"]\n      }, \"4\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: [\" \", t(\"header.private\"), \" \"]\n      }, \"5\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: [\" \", t(\"header.cruise\"), \" \"]\n      }, \"6\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: [\" \", t(\"header.hotel\"), \" \"]\n      }, \"7\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: [\" \", t(\"header.local\"), \" \"]\n      }, \"8\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: [\" \", t(\"header.theme\"), \" \"]\n      }, \"9\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: [\" \", t(\"header.custom\"), \" \"]\n      }, \"10\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: [\" \", t(\"header.study\"), \" \"]\n      }, \"11\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: [\" \", t(\"header.visa\"), \" \"]\n      }, \"12\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: [\" \", t(\"header.enterprise\"), \" \"]\n      }, \"13\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: [\" \", t(\"header.high_end\"), \" \"]\n      }, \"14\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: [\" \", t(\"header.outdoor\"), \" \"]\n      }, \"15\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: [\" \", t(\"header.insurance\"), \" \"]\n      }, \"16\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Header, \"d/EtMvfJ320zdcy7FrfIiVVbfEM=\", false, function () {\n  return [useHistory, useLocation, useParams, useRouteMatch, useSelector, useSelector, useDispatch, useTranslation, useSelector, useSelector, useSelector];\n});\n\n_c = Header;\n\nvar _c;\n\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"sources":["/Users/melony/Desktop/react-travel/src/components/header/Header.tsx"],"names":["React","useState","useEffect","styles","Layout","Typography","Input","Menu","Button","Dropdown","GlobalOutlined","useHistory","useLocation","useParams","useRouteMatch","useSelector","useDispatch","addLanguageActionCreator","changeLanguageActionCreator","useTranslation","MenuItem","jwt_decode","UserSlice","Header","history","location","params","match","language","state","languageList","dispatch","t","jwt","user","token","username","setUsername","shoppingCartItems","shoppingCart","items","shoppingCartLoading","loading","menuClickHandler","e","key","onLogout","actions","logOut","push","inner","marginLeft","map","item","name","code","length","logo","title","keywords"],"mappings":"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","sourcesContent":["import React,{useState, useEffect} from \"react\";\nimport styles from \"./Header.module.css\";\nimport logo from \"../../assets/logo.svg\";\nimport { Layout, Typography, Input, Menu, Button, Dropdown } from \"antd\";\nimport { GlobalOutlined } from \"@ant-design/icons\";\nimport { useHistory, useLocation, useParams, useRouteMatch } from \"react-router-dom\";\nimport { RootState } from \"../../redux/store\";\nimport {useSelector} from \"../../redux/hooks\";\nimport { useDispatch } from \"react-redux\";\nimport { Dispatch } from \"redux\";\nimport { addLanguageActionCreator, changeLanguageActionCreator, LanguageActionTypes } from \"../../redux/language/languageActions\";\nimport {useTranslation} from \"react-i18next\";\nimport MenuItem from \"antd/lib/menu/MenuItem\";\nimport jwt_decode, {JwtPayload as DefaultJwtPayload } from 'jwt-decode';\nimport { UserSlice } from \"../../redux/user/slice\";\n\ninterface JwtPayload extends DefaultJwtPayload {\n  username: string,\n\n}\nexport const Header: React.FC = () => {\n  const history = useHistory();\n  const location = useLocation();\n  const params = useParams();\n  const match = useRouteMatch();\n  const language = useSelector( (state )=>state.language.language);\n  const languageList = useSelector((state)=>state.language.languageList);\n  const dispatch = useDispatch();\n  const {t} = useTranslation();\n  //const dispatch = useDispatch<Dispatch<LanguageActionTypes>>()\n  const jwt = useSelector(state=>state.user.token);\n  const [username, setUsername]  = useState(\"\");\n\n  const shoppingCartItems = useSelector(state=> state.shoppingCart.items);\n  const shoppingCartLoading = useSelector(state => state.shoppingCart.loading);\n  useEffect(()=>{\n    if(jwt) {\n      const token = jwt_decode<JwtPayload>(jwt)\n      setUsername(token.username)\n    }\n  },[jwt])\n  const menuClickHandler =(e) =>{\n    if(e.key===\"new\") {\n      dispatch(addLanguageActionCreator(\"new_language\",\"new_lang\"))\n    }else {\n      dispatch(changeLanguageActionCreator(e.key))\n    }\n  }\n\n  const onLogout =()=> {\n    dispatch(UserSlice.actions.logOut());\n    history.push('/');\n    \n  }\n  return (\n    <div className={styles[\"app-header\"]}>\n      {/* top-header */}\n      <div className={styles[\"top-header\"]}>\n        <div className={styles.inner}>\n          <Typography.Text>{t(\"header.slogan\")}</Typography.Text>\n          <Dropdown.Button\n            style={{ marginLeft: 15 }}\n            overlay={\n              <Menu onClick={menuClickHandler}>\n                {languageList.map(item=> {\n                  return (<Menu.Item key={item.code}>{item.name}</Menu.Item>)\n                })}\n                <MenuItem key=\"new\">{t(\"header.add_new_language\")}</MenuItem>\n              </Menu>\n            }\n            icon={<GlobalOutlined />}\n          >\n            {language===\"zh\"?\"中文\":\"english\"}\n          </Dropdown.Button>\n          {jwt ? \n           <Button.Group className={styles[\"button-group\"]}>\n             <span>{t(\"header.welcome\")}&nbsp;&nbsp;</span>\n             <Typography.Text strong>{username}</Typography.Text>\n             <div >\n             <Button loading={shoppingCartLoading} onClick={()=>{history.push('/shoppingCart')}}>{t(\"header.shoppingCart\")}({shoppingCartItems.length})</Button>\n             <Button onClick={onLogout}>{t(\"header.singOut\")}</Button>\n             </div>\n           </Button.Group>\n           :\n           <Button.Group className={styles[\"button-group\"]}>\n             <div>\n           <Button onClick={() => history.push(\"/register\")}> {t(\"header.register\")}</Button>\n           <Button onClick={() => history.push(\"/signIn\")}>{t(\"header.signin\")}</Button>\n           </div>\n         </Button.Group>\n          }\n        \n        </div>\n      </div>\n      <Layout.Header className={styles[\"main-header\"]}>\n        <span onClick={() => history.push(\"/\")}>\n          <img src={logo} alt=\"logo\" className={styles[\"App-logo\"]} />\n          <Typography.Title level={3} className={styles.title}>\n          {t(\"header.title\")}\n          </Typography.Title>\n        </span>\n        <Input.Search\n          placeholder={\"Please enter into your destination\"}\n          className={styles[\"search-input\"]}\n          onSearch={(keywords)=>{\n            history.push(\"/search/\" + keywords)\n          }}\n        />\n      </Layout.Header>\n      <Menu mode={\"horizontal\"} className={styles[\"main-menu\"]}>\n      <Menu.Item key=\"1\"> {t(\"header.home_page\")} </Menu.Item>\n          <Menu.Item key=\"2\"> {t(\"header.weekend\")} </Menu.Item>\n          <Menu.Item key=\"3\"> {t(\"header.group\")} </Menu.Item>\n          <Menu.Item key=\"4\"> {t(\"header.backpack\")} </Menu.Item>\n          <Menu.Item key=\"5\"> {t(\"header.private\")} </Menu.Item>\n          <Menu.Item key=\"6\"> {t(\"header.cruise\")} </Menu.Item>\n          <Menu.Item key=\"7\"> {t(\"header.hotel\")} </Menu.Item>\n          <Menu.Item key=\"8\"> {t(\"header.local\")} </Menu.Item>\n          <Menu.Item key=\"9\"> {t(\"header.theme\")} </Menu.Item>\n          <Menu.Item key=\"10\"> {t(\"header.custom\")} </Menu.Item>\n          <Menu.Item key=\"11\"> {t(\"header.study\")} </Menu.Item>\n          <Menu.Item key=\"12\"> {t(\"header.visa\")} </Menu.Item>\n          <Menu.Item key=\"13\"> {t(\"header.enterprise\")} </Menu.Item>\n          <Menu.Item key=\"14\"> {t(\"header.high_end\")} </Menu.Item>\n          <Menu.Item key=\"15\"> {t(\"header.outdoor\")} </Menu.Item>\n          <Menu.Item key=\"16\"> {t(\"header.insurance\")} </Menu.Item>\n      </Menu>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}